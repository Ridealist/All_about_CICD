[ENG](#how-to-deploy) / [KOR](#배포)

# How to deploy?

## 

# 배포

## 1. '온프레미스' vs '클라우드 컴퓨팅'
#
### 1.1 온프레미스 (On-premise)  
배포에 필요한 서버를 자체적으로 물리적인 공간에 물리적인 하드웨어로 구성하는 것을 의미합니다. 하드웨어, 네트워크, 전력 등 서버 운영에 필요한 모든 것을 사용자가 관리해야 합니다.
#
### 1.2 클라우드 컴퓨팅 (Cloud Computing)  
물리적인 서버를 운영하는 업체로부터 가상의 컴퓨팅 자원을 제공받습니다. 물리적인 서버를 대여하는 것이 아닌 가상화 기술이 적용된 컴퓨팅 자원(인스턴스)을 제공받습니다. 인스턴스는 마치 물리적인 서버처럼 접속하여 제어할 수 있습니다.
클라우드 컴퓨팅에는 다음과 같은 유형이 있습니다.  
* 서비스로서의 인프라 (Infrastructure-as-a-Service, IaaS)
* 서비스로서의 플랫폼 (Platforms-as-a-Service, Paas)
* 서비스로서의 소프트웨어 (Software-as-a-Service, Saas)

다음 장에서 클라우드 컴퓨팅의 유형을 자세히 알아봅니다.
  
---

## 2. 클라우드 컴퓨팅의 유형
#
### 2.1 서비스로서의 인프라 (Infrastructure-as-a-Service, IaaS)  
서비스 제공 업체는 컴퓨팅 자원을 사용자에게 제공합니다. 사용자는 온프레미스 환경과 유사한 수준으로 컴퓨팅 자원을 제어할 수 있습니다. 하드웨어, 네트워크, 전력에 신경쓰지 않고 물리적인 서버를 운영하는 것과 거의 비슷한 효과를 가져올 수 있습니다. 운영체제를 포함한 서버의 소프트웨어를 사용자가 제어할 수 있습니다. Iaas로 배포하기 위해서는 높은 수준의 서버 관리 능력과 소스코드 개발 능력이 요구됩니다.  
대표적인 IaaS는 다음과 같습니다.
* AWS EC2
* MS Azure
* Google GCP
#
### 2.2 서비스로서의 플랫폼 (Platforms-as-a-Service, PaaS)  
서비스 제공 업체는 컴퓨팅 자원과 더불어 배포에 필요한 소프트웨어를 사용자에게 제공합니다. 운영체제를 포함한 서버의 소프트웨어를 사용자가 제어할 수 없지만, 일반적인 경우에는 문제가 되지 않습니다. 낮은 수준의 서버 관리 능력과 코드 개발 능력이 요구됩니다.  
대표적인 PaaS는 다음과 같습니다.
* Heroku
* AWS Lightsail
* AWS EB (일반적인 PaaS에 비해 IaaS에 가까운 형태입니다.)
#
### 2.3 서비스로서의 소프트웨어 (Software-as-a-Service, Saas)  
서비스 제공 업체는 컴퓨팅 자원과 더불어 배포에 필요한 소프트웨어, 소스코드 빌더 소프트웨어를 사용자에게 제공합니다. 운영체제를 포함한 서버의 소프트웨어를 사용자가 제어할 수 없으며, 사용자는 작성한 소스코드를 빌드할 수 없습니다. 서버 관리 능력과 코드 개발 능력이 필요하지 않습니다. 사용자는 소스코드 빌더 소프트웨어의 사용법을 익히면 웹서비스를 개발 및  배포할 수 있습니다.  
대표적인 SaaS는 다음과 같습니다.
* Imweb
* Sixshop
* Wix

(참고: SaaS 설명은 웹서비스 개발 및 배포에 한정하여 기술하였습니다. 일반적으로 SaaS에서 제공하는 소프트웨어는 소스코드 빌더 소프트웨어 뿐만 아니라 Gmail, DropBox 등과 같은 일반적인 소프트웨어도 포함됩니다.)

---
## 3. 웹서비스 배포에 이용할 수 있는 서비스
#
### 3.1 Github Pages
3.1.1. 개요  
프론트엔드 배포가 가능한 Paas입니다. Github 저장소에서 HTML, CSS, JS를 가져와 별도의 빌드 프로세스를 통해 파일을 실행하고 웹사이트를 게시하는 정적 사이트 호스팅 서비스입니다. Vue, React와 같은 프론트엔드 프레임워크는 지원하지 않습니다.

3.1.2. 배포 방법  
Github 저장소에 Push후 Github pages에서 브랜치를 설정합니다.

3.1.3. 추천 대상  
서버 운용에 신경쓰지 않고, 학습용 또는 단순 웹페이지 게시 목적인 경우에 추천합니다.
#
### 3.2 Netlify
3.2.1. 개요  
프론트엔드 배포가 가능한 Pass입니다. Github Pages와 유사하나 Custom domains, HTTPS, Deploy Previews, Rollbacks 등과 같은 부가기능을 제공하며, Vue, React와 같은 다양한 프론트엔드 프레임워크를 지원합니다.

3.2.2. 배포 방법  
Github 저장소와 연결하여 배포합니다.

3.2.3. 추천 대상  
서버 운용에 신경쓰지 않고, 프론트엔드 웹사이트를 운영할 목적인 경우에 추천합니다.
#
### 3.3 Vercel
3.3.1. 개요  
프론트엔드 배포가 가능한 Paas입니다. Next.js 개발팀에서 만든 호스팅 서비스로 Netlify와 유사합니다.

3.3.2. 배포 방법  
Github 저장소와 연결하여 배포합니다.

3.3.3. 추천 대상  
서버 운용에 신경쓰지 않고, Next.js기반 프론트엔드 웹사이트를 운영할 목적인 경우에 추천합니다.
#
### 3.4 Heroku
3.4.1. 개요  
프론트엔드와 백엔드 배포가 가능한 PaaS입니다. AWS EC2 기반으로 동작하며, OS 및 소프트웨어(파이썬 버전 등)은 사용자가 제한적으로도 선택할 수 없습니다. Logging, Database 등 다양한 부가서비스를 제공합니다.

3.4.2. 배포 방법  
Github 저장소 연결, 또는 Heroku 저장소에 소스코드 Push합니다.  

3.4.3. 추천 대상  
서버 운용에 신경쓰지 않고, 프론트엔드와 백엔드로 구성된 웹사이트를 운영할 목적인 경우에 추천합니다.
#
### 3.5 AWS Lightsail
3.5.1. 개요  
프론트엔드와 백엔드 배포가 가능한 Paas입니다. Heroku와 AWS EB 중간 정도의 포지션으로 제한적이기는 하나 OS 및 소프트웨어(파이썬 버전 등)를 선택하여 운용할 수 있습니다. AWS EC2만큼의 자유도는 없으며, AWS 일부 서비스와 연동되지 않습니다. 

3.5.2. 배포 방법  
인스턴스 생성 후 SSH 연결하여 Git Clone, 혹은 소스코드 직접 업로드합니다.

3.5.3. 추천 대상  
AWS 입문 사용자, 프론트엔드와 백엔드로 구성된 웹사이트를 운영할 목적인 경우에 추천합니다.  
(다만, 주관적인 의견으로 Lightsail보다 EB를 바로 도입하는 것이 효율적으로 판단됩니다.)
#
### 3.6 AWS EB(Elastic Beanstalk)
3.6.1. 개요  
프론트엔드와 백엔드 배포가 가능한 PaaS입니다. 다만 EB는 EC2, S3, RDS 등과 같은 AWS의 각종 서비스를 패키지로 묶어 배포 환경을 구성해주는 서비스로 일반적인 Paas와 결이 다소 다릅니다. AWS에서는 EB를 PaaS로 소개하고 있으나, EC2를 포함한다는 점에서 IaaS에 가까다고 판단됩니다. AWS EB를 '시스템 운영을 줄이고 웹 사이트에만 집중하려면 최선의 선택'이라고 익명의 누군가가 기술하였습니다.

3.6.2. 배포 방법  
인스턴스 생성 후 SSH 연결하여 Git Clone, 혹은 소스코드 직접 업로드합니다.  

3.6.3. 추천 대상  
자동 환경 구성과 직접 서버 운용을 희망하며, 프론트엔드와 백엔드로 구성된 웹사이트를 운영할 목적인 경우에 추천합니다.
#
### 3.7 AWS EC2(Elastic Compute Cloud)  
3.7.1. 개요  
프론트엔드와 백엔드 배포가 가능한 IaaS입니다. 물리적인 서버를 운용하는 것과 거의 비슷합니다.  

3.7.2. 배포 방법  
인스턴스 생성 후 SSH 연결하여 Git Clone, 혹은 소스코드 직접 업로드합니다.  

3.7.3. 추천 대상  
수동 환경 구성과 직접 서버 운용을 희망하며, 프론트엔드와 백엔드로 구성된 웹사이트를 운영할 목적인 경우에 추천합니다.

---
## 4. 묻고 답하기
#
### 4.1. 2022. 7. 26. 21:00 ~ 22:00  
Q. 인스턴스를 다수 생성(로드밸런서)하여 트래픽을 분산해도, 데이터베이스에서 몰리면 트래픽 분산 효과가 없어지지 않나요?  
A. 데이터베이스도 분산합니다. 데이터베이스 트래픽 분산을 위해 샤딩과 같은 기술이 활용됩니다.  
#
Q. AWS Lambda는 사용한 시간 만큼한 요금을 지불하는데, 호출을 받기 위해서는 계속 가동되어야 하지 않나요?  
A. 호출이 잦은 서비스는 인스턴스를 유지, 그렇지 않은 인트턴스는 대기 상태가 됩니다. 따라서 오랜만에 호출이 들어온 인스턴스는 초기 응답에 일정 시간이 소요됩니다. 람다는 간단한 함수를 사용하는 서비스 등에 유용합니다.  
#
Q. 배포 시 환경변수를 설정하면 API Key는 노출되지 않나요?  
A. 소스코드에서 노출되지 않으나, API 호출 시 개발자도구에 노출됩니다. 따라서 API 호출은 프론트엔드가 아닌 백엔드에서 이루어져야 합니다.

---
## Reference

[Deploy - Classbinu's Dev story](https://classbinu.tistory.com/46)
